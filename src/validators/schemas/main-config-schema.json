{
  "type": "object",
  "properties": {
    "definitions": {
      "service": {
        "$id": "#service",
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "template_name": {
            "type": "string"
          },
          "template": {
            "type": "string"
          },
          "git": {
            "type": "object",
            "properties": {
              "repository": {
                "type": "string"
              },
              "branch": {
                "type": "string"
              }
            }
          },
          "docker": {
            "type": "boolean"
          },
          "local_init_script": {
            "type": "array",
            "items": [
              {
                "type": "string"
              }
            ]
          },
          "containers_init_script": {
            "type": "array",
            "items": [
              {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "script": {
                    "type": "array",
                    "items": [
                      {
                        "type": "string"
                      }
                    ]
                  }
                }
              }
            ]
          },
          "commands": {
            "type": "array",
            "items": [
              {
                "type": "string"
              }
            ]
          }
        }
      },
      "mysql_credentials": {
        "$id": "#mysql_credentials",
        "type": "object",
        "required": ["username", "password", "host", "port"],
        "properties": {
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "host": {
            "type": "string"
          },
          "port": {
            "type": "number"
          }
        }
      }
    },
    "services_templates": {
      "type": "array",
      "items": [
        {
          "$ref": "#service"
        }
      ]
    },
    "services": {
      "type": "array",
      "items": [
        {
          "$ref": "#service"
        }
      ]
    },
    "commands": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string"
          },
          "environment": {
            "type": "string"
          },
          "script": {
            "type": "array",
            "items": [
              {
                "type": "string"
              }
            ]
          }
        }
      }
    },
    "networks": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "mysql": {
      "type": "object",
      "required": ["from", "to"],
      "properties": {
        "from": {
          "$ref": "#mysql_credentials"
        },
        "to": {
          "$ref": "#mysql_credentials"
        },
        "databases": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    }
  }
}